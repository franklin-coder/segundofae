"use strict";(()=>{var e={};e.id=792,e.ids=[792],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},18200:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>P});var s={};r.r(s),r.d(s,{DELETE:()=>i,dynamic:()=>c});var o=r(49303),d=r(88716),n=r(60670),a=r(87070),u=r(83493);let c="force-dynamic";async function i(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r||"string"!=typeof r||""===r.trim())return a.NextResponse.json({success:!1,error:"Product ID is required and must be a valid string"},{status:400});let s=r.trim(),o=await u._.$transaction(async e=>{let t=await e.product.findUnique({where:{id:s},select:{id:!0,name:!0,category:!0}});if(!t)throw Error("PRODUCT_NOT_FOUND");return{deletedProduct:await e.product.delete({where:{id:s}}),existingProduct:t}});return console.log("Product deleted successfully:",{id:o.deletedProduct.id,name:o.deletedProduct.name,category:o.deletedProduct.category}),a.NextResponse.json({success:!0,message:"Product deleted successfully",deletedProduct:{id:o.deletedProduct.id,name:o.deletedProduct.name,category:o.deletedProduct.category}},{status:200})}catch(e){if(console.error("Error deleting product:",e),"PRODUCT_NOT_FOUND"===e.message||"P2025"===e.code)return a.NextResponse.json({success:!1,error:"Product not found"},{status:404});if("P2003"===e.code)return a.NextResponse.json({success:!1,error:"Cannot delete product: it is referenced by other records"},{status:409});if("P2014"===e.code)return a.NextResponse.json({success:!1,error:"Cannot delete product: constraint violation"},{status:409});if("P1001"===e.code||"P1002"===e.code)return a.NextResponse.json({success:!1,error:"Database connection error. Please try again later."},{status:503});return a.NextResponse.json({success:!1,error:"Failed to delete product. Please try again.",details:void 0},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:d.x.APP_ROUTE,page:"/api/products/delete/route",pathname:"/api/products/delete",filename:"route",bundlePath:"app/api/products/delete/route"},resolvedPagePath:"/home/ubuntu/github_repos/segundofae/app/api/products/delete/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:P,serverHooks:m}=l,g="/api/products/delete/route";function f(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:P})}},83493:(e,t,r)=>{r.d(t,{_:()=>o});let s=require("@prisma/client"),o=global.prisma||new s.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(18200));module.exports=s})();