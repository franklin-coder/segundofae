"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{9322:function(e,t,r){r.d(t,{CartProvider:function(){return c},j:function(){return d}});var a=r(7437),i=r(2265);let s=(0,i.createContext)(null),n=(e,t)=>{switch(t.type){case"ADD_ITEM":{let r;let a=(r=e.items.find(e=>e.id===t.payload.id)?e.items.map(e=>e.id===t.payload.id?{...e,quantity:e.quantity+1}:e):[...e.items,{...t.payload,quantity:1}]).reduce((e,t)=>e+t.price*t.quantity,0);return{items:r,total:a}}case"REMOVE_ITEM":{let r=e.items.filter(e=>e.id!==t.payload),a=r.reduce((e,t)=>e+t.price*t.quantity,0);return{items:r,total:a}}case"UPDATE_QUANTITY":{let r=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0),a=r.reduce((e,t)=>e+t.price*t.quantity,0);return{items:r,total:a}}case"CLEAR_CART":return{items:[],total:0};case"LOAD_CART":return t.payload;default:return e}},o=()=>{try{let e=localStorage.getItem("faelight-cart");if(e){let t=JSON.parse(e);if(t&&Array.isArray(t.items)&&"number"==typeof t.total)return t}}catch(e){console.error("Error loading cart from localStorage:",e)}return{items:[],total:0}},l=e=>{try{localStorage.setItem("faelight-cart",JSON.stringify(e))}catch(e){console.error("Error saving cart to localStorage:",e)}},c=({children:e})=>{let[t,r]=(0,i.useReducer)(n,{items:[],total:0}),[c,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=o();e.items.length>0&&r({type:"LOAD_CART",payload:e}),d(!0)},[]),(0,i.useEffect)(()=>{c&&l(t)},[t,c]);let u=t.items.reduce((e,t)=>e+t.quantity,0);return(0,a.jsx)(s.Provider,{value:{state:t,dispatch:r,items:t.items,addItem:e=>{r({type:"ADD_ITEM",payload:e})},removeItem:e=>{r({type:"REMOVE_ITEM",payload:e})},updateQuantity:(e,t)=>{r({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{r({type:"CLEAR_CART"})},total:t.total,itemCount:u,isLoaded:c},children:e})},d=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},9064:function(e,t,r){r.d(t,{Z:function(){return N}});var a=r(7437),i=r(2265),s=r(3145),n=r(7648),o=r(429),l=r(2208),c=r(8997),d=r(6275),u=r(2869),m=r(5974),p=r(9322),g=r(8930),x=r(8730),f=r(5095),h=r(6865),v=r(2489),y=({isOpen:e,onClose:t,onConfirm:r,productName:i,isLoading:s=!1,error:n=null})=>{let l=()=>{s||t()};return(0,a.jsx)(f.M,{children:e&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50",onClick:l}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete Product"})]}),(0,a.jsx)("button",{onClick:l,disabled:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(v.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete this product?"}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-red-800 font-medium",children:['"',i,'"']})}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"This action cannot be undone. The product will be permanently removed from your store."})]}),n&&(0,a.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:n})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u.z,{type:"button",variant:"outline",onClick:l,disabled:s,className:"flex-1",children:"Cancel"}),(0,a.jsx)(u.z,{type:"button",onClick:r,disabled:s,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:s?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Deleting..."]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"Delete Product"]})})]})]})]})})},b=r(5186),j=({productId:e,productName:t,onProductDeleted:r})=>{let{isAdmin:s}=(0,x.a)(),[n,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(null),p=(0,i.useRef)(null);if(!s)return null;let f=async()=>{if(!l){c(!0),m(null),p.current&&p.current.abort(),p.current=new AbortController;try{let a=await fetch(`/api/products/delete?id=${encodeURIComponent(e)}`,{method:"DELETE",signal:p.current.signal,headers:{"Content-Type":"application/json"}});if(p.current.signal.aborted)return;if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let i=await a.json();if(i.success)b.ZP.success(`Product "${t}" deleted successfully!`),o(!1),r?r():setTimeout(()=>{p.current?.signal.aborted||window.location.reload()},500);else{let e=i.error||"Failed to delete product";m(e),b.ZP.error(e)}}catch(t){if("AbortError"===t.name)return;console.error("Error deleting product:",t);let e=t.message||"An error occurred while deleting the product";m(e),b.ZP.error(e)}finally{p.current?.signal.aborted||c(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,a.jsx)(u.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),l||(m(null),o(!0))},size:"sm",variant:"destructive",disabled:l,className:`w-8 h-8 p-0 bg-red-600/90 hover:bg-red-700 text-white shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-300 ${l?"cursor-not-allowed opacity-50":""}`,title:l?"Deleting...":"Delete Product",children:(0,a.jsx)(g.Z,{className:`h-4 w-4 ${l?"animate-pulse":""}`})})}),(0,a.jsx)(y,{isOpen:n,onClose:()=>{p.current&&l&&p.current.abort(),o(!1),m(null),c(!1)},onConfirm:f,productName:t,isLoading:l,error:d})]})},N=({product:e,onProductDeleted:t})=>{let[r,g]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!0),[h,v]=(0,i.useState)(!1),{addItem:y}=(0,p.j)();if(!e||!e.id)return console.warn("ProductCard: Invalid product data",e),null;let b=(()=>{try{let t=e.category||"products",r=e.id;if(!r)return console.warn("ProductCard: Missing product ID",e),"/products";let a=encodeURIComponent(r);return`/products/${t}/${a}`}catch(t){return console.error("ProductCard: Error generating URL",t,e),"/products"}})();return(0,a.jsx)(o.E.div,{className:"group relative bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden hover-lift",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),whileHover:{y:-5},children:(0,a.jsxs)(n.default,{href:b,onClick:t=>{e.id||(t.preventDefault(),console.error("Cannot navigate: Invalid product ID"))},children:[(0,a.jsxs)("div",{className:"relative aspect-[4/5] overflow-hidden bg-gray-100",children:[x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),(0,a.jsx)(s.default,{src:h?"/images/placeholder-product.jpg":e.images?.[0]||"/images/placeholder-product.jpg",alt:e.name||"Product image",fill:!0,className:`object-cover transition-all duration-500 ${r?"scale-110":"scale-100"}`,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",onLoad:()=>f(!1),onError:()=>{f(!1),v(!0)},priority:!1}),(0,a.jsxs)("div",{className:`absolute inset-0 bg-black/20 flex items-center justify-center space-x-2 transition-all duration-300 ${r?"opacity-100":"opacity-0"}`,children:[(0,a.jsx)(u.z,{size:"sm",variant:"secondary",className:"bg-white hover:bg-gray-100 text-gray-900",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)(u.z,{size:"sm",variant:"secondary",className:"bg-white hover:bg-gray-100 text-gray-900",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 flex flex-col space-y-1",children:[e.featured&&(0,a.jsx)(m.C,{className:"bg-[#0A8E81] text-white text-xs",children:"Featured"}),!e.inStock&&(0,a.jsx)(m.C,{variant:"destructive",className:"text-xs",children:"Out of Stock"}),e.originalPrice&&e.originalPrice>e.price&&(0,a.jsx)(m.C,{variant:"secondary",className:"text-xs",children:"Sale"})]}),(0,a.jsx)(j,{productId:e.id,productName:e.name,onProductDeleted:t})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 group-hover:text-[#0A8E81] transition-colors duration-300 line-clamp-2",children:e.name||"Unnamed Product"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e.category||"Uncategorized"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description||"No description available"}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-xl font-bold text-[#0A8E81]",children:["$",(e.price||0).toFixed(2)]}),e.originalPrice&&e.originalPrice>e.price&&(0,a.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",e.originalPrice.toFixed(2)]})]})}),(0,a.jsxs)(u.z,{className:"w-full bg-[#0A8E81] hover:bg-[#087267] text-white transition-all duration-300",onClick:t=>{t.preventDefault(),t.stopPropagation(),e&&e.inStock&&y({id:e.id,name:e.name,price:e.price,image:e.images?.[0]||"/images/placeholder-product.jpg",category:e.category})},disabled:!e.inStock,children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),e.inStock?"Add to Cart":"Out of Stock"]})]})]})})}},5974:function(e,t,r){r.d(t,{C:function(){return o}});var a=r(7437);r(2265);var i=r(7712),s=r(4508);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,a.jsx)("div",{className:(0,s.cn)(n({variant:t}),e),...r})}},2869:function(e,t,r){r.d(t,{z:function(){return c}});var a=r(7437),i=r(2265),s=r(7495),n=r(7712),o=r(4508);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...n},c)=>{let d=i?s.g7:"button";return(0,a.jsx)(d,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:c,...n})});c.displayName="Button"},8730:function(e,t,r){r.d(t,{AuthProvider:function(){return o},a:function(){return l}});var a=r(7437),i=r(2265);let s=(0,i.createContext)(void 0),n={username:"admin",password:"faelight2024"};function o({children:e}){let[t,r]=(0,i.useState)(!1),[o,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=localStorage.getItem("faelight_admin");if(e){let t=JSON.parse(e);t.isAdmin&&t.adminUser&&(r(!0),l(t.adminUser))}},[]),(0,a.jsx)(s.Provider,{value:{isAdmin:t,login:(e,t)=>e===n.username&&t===n.password&&(r(!0),l(e),localStorage.setItem("faelight_admin",JSON.stringify({isAdmin:!0,adminUser:e,loginTime:new Date().toISOString()})),!0),logout:()=>{r(!1),l(null),localStorage.removeItem("faelight_admin")},adminUser:o},children:e})}function l(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4508:function(e,t,r){r.d(t,{cn:function(){return s}});var a=r(1994),i=r(3335);function s(...e){return(0,i.m6)((0,a.W)(e))}}}]);