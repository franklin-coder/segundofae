(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{4654:function(){},2932:function(e,r,t){Promise.resolve().then(t.bind(t,8348))},9322:function(e,r,t){"use strict";t.d(r,{CartProvider:function(){return o},j:function(){return l}});var s=t(7437),a=t(2265);let i=(0,a.createContext)(null);function n(e,r){switch(r.type){case"ADD_ITEM":{let t=e.items.find(e=>e.product.id===r.product.id),s=r.quantity||1;if(t){let t=e.items.map(e=>e.product.id===r.product.id?{...e,quantity:e.quantity+s}:e);return{items:t,total:t.reduce((e,r)=>e+r.product.price*r.quantity,0)}}{let t=[...e.items,{id:r.product.id,product:r.product,quantity:s}];return{items:t,total:t.reduce((e,r)=>e+r.product.price*r.quantity,0)}}}case"REMOVE_ITEM":{let t=e.items.filter(e=>e.product.id!==r.productId);return{items:t,total:t.reduce((e,r)=>e+r.product.price*r.quantity,0)}}case"UPDATE_QUANTITY":{let t=e.items.map(e=>e.product.id===r.productId?{...e,quantity:r.quantity}:e).filter(e=>e.quantity>0);return{items:t,total:t.reduce((e,r)=>e+r.product.price*r.quantity,0)}}case"CLEAR_CART":return{items:[],total:0};default:return e}}function o({children:e}){let[r,t]=(0,a.useReducer)(n,{items:[],total:0});return(0,s.jsx)(i.Provider,{value:{state:r,dispatch:t},children:e})}function l(){let e=(0,a.useContext)(i);if(!e)throw Error("useCart must be used within a CartProvider");return e}},8348:function(e,r,t){"use strict";let s;t.d(r,{default:function(){return z}});var a=t(7437),i=t(2265),n=t(3287),o=t(3145),l=t(2449),c=t(2369),d=t(340),u=t(8226),m=t(6337),p=t(2869),h=t(5186),x=t(6815),f=t(9699),g=t(401),y=t(4508);let v=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(f.fC,{ref:t,className:(0,y.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,a.jsx)(f.z$,{className:(0,y.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})}));v.displayName=f.fC.displayName;var b=t(9322),j=t(9376),N=t(6853),_=t(8672),E=t(9142),w=t(257);let P=()=>{let e={NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:"pk_test_51S3qr1HT8UTeXRMX8Bfp4pVx3jGVqJ0OLs7G5voYol7dxzoTHm4ICTUcImeZF2BjUAexdmdfnsP59RrvjQwSN7hG00TJRMiVSi",STRIPE_SECRET_KEY:w.env.STRIPE_SECRET_KEY,STRIPE_WEBHOOK_SECRET:w.env.STRIPE_WEBHOOK_SECRET},r=[],t=[];if(Object.entries(e).forEach(([e,s])=>{s?"NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY"===e&&s.includes("pk_test_temp")?t.push(`${e} is using a temporary/placeholder value`):"STRIPE_SECRET_KEY"!==e||s.startsWith("sk_")?"NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY"!==e||s.startsWith("pk_")||t.push(`${e} does not appear to be a valid Stripe publishable key`):t.push(`${e} does not appear to be a valid Stripe secret key`):r.push(e)}),r.length>0)throw Error(`Missing required Stripe environment variables: ${r.join(", ")}`);if(t.length>0)throw Error(`Invalid Stripe environment variables: ${t.join(", ")}`);return{publishableKey:e.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,secretKey:e.STRIPE_SECRET_KEY,webhookSecret:e.STRIPE_WEBHOOK_SECRET}},S=()=>{let e="pk_test_51S3qr1HT8UTeXRMX8Bfp4pVx3jGVqJ0OLs7G5voYol7dxzoTHm4ICTUcImeZF2BjUAexdmdfnsP59RrvjQwSN7hG00TJRMiVSi";if(!e)throw Error("Missing NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY");if(!e.startsWith("pk_"))throw Error("NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY does not appear to be valid");return e},C=null,T=()=>(C||(C=P()),C),I=()=>{if(!s){let e=S();s=(0,_.J)(e)}return s},k=null;new Proxy({},{get(e,r){if(!k){let e=T();k=new E.Z(e.secretKey,{apiVersion:"2025-08-27.basil"})}return k[r]}});let A=()=>{let[e,r]=(0,i.useState)(null),t=e=>e?"card_error"===e.type?{message:({card_declined:"Your card was declined. Please try a different payment method.",expired_card:"Your card has expired. Please use a different card.",incorrect_cvc:"Your card's security code is incorrect.",incorrect_number:"Your card number is incorrect.",insufficient_funds:"Your card has insufficient funds.",invalid_cvc:"Your card's security code is invalid.",invalid_expiry_month:"Your card's expiration month is invalid.",invalid_expiry_year:"Your card's expiration year is invalid.",invalid_number:"Your card number is invalid.",processing_error:"An error occurred processing your card. Please try again.",authentication_required:"Your card requires authentication. Please complete the verification."})[e.code]||e.message||"Your card was declined.",type:"card_error",code:e.code,decline_code:e.decline_code,param:e.param}:"validation_error"===e.type?{message:e.message||"Please check your payment information.",type:"validation_error",code:e.code,param:e.param}:"api_error"===e.type?{message:"Payment service temporarily unavailable. Please try again.",type:"api_error",code:e.code}:"connection_error"===e.type?{message:"Network error. Please check your connection and try again.",type:"network_error",code:e.code}:"rate_limit_error"===e.type?{message:"Too many requests. Please wait a moment and try again.",type:"api_error",code:e.code}:{message:e.message||"An unexpected error occurred. Please try again.",type:"unknown_error",code:e.code}:{message:"An unknown error occurred",type:"unknown_error"};return{error:e,setStripeError:e=>{r(t(e))},clearError:()=>{r(null)},getErrorSuggestion:e=>{switch(e.type){case"card_error":if("card_declined"===e.code)return"Try using a different card or contact your bank.";if("insufficient_funds"===e.code)return"Please check your account balance or use a different card.";if(e.code?.includes("incorrect")||e.code?.includes("invalid"))return"Please double-check your card information and try again.";return"Please try a different payment method.";case"validation_error":return"Please check all required fields and try again.";case"api_error":return"This is a temporary issue. Please try again in a few minutes.";case"network_error":return"Please check your internet connection and try again.";default:return"If the problem persists, please contact our support team."}},hasError:!!e}};var R=t(9240),B=t(2489);let q=(0,t(7712).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),L=i.forwardRef(({className:e,variant:r,...t},s)=>(0,a.jsx)("div",{ref:s,role:"alert",className:(0,y.cn)(q({variant:r}),e),...t}));L.displayName="Alert",i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("h5",{ref:t,className:(0,y.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let O=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,y.cn)("text-sm [&_p]:leading-relaxed",e),...r}));O.displayName="AlertDescription";var Y=({title:e="Error",message:r,suggestion:t,onDismiss:s,variant:i="destructive"})=>(0,a.jsxs)(L,{className:(()=>{switch(i){case"warning":return"border-orange-200 bg-orange-50 text-orange-800";case"info":return"border-blue-200 bg-blue-50 text-blue-800";default:return"border-red-200 bg-red-50 text-red-800"}})(),children:[(0,a.jsx)(R.Z,{className:`h-4 w-4 ${(()=>{switch(i){case"warning":return"text-orange-600";case"info":return"text-blue-600";default:return"text-red-600"}})()}`}),(0,a.jsx)(O,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:e}),(0,a.jsx)("div",{className:"mb-2",children:r}),t&&(0,a.jsxs)("div",{className:"text-sm opacity-90",children:[(0,a.jsx)("strong",{children:"Suggestion:"})," ",t]})]}),s&&(0,a.jsx)(p.z,{variant:"ghost",size:"sm",onClick:s,className:"h-6 w-6 p-0 hover:bg-transparent",children:(0,a.jsx)(B.Z,{className:"h-4 w-4"})})]})})]}),U=({size:e="md",className:r,color:t="primary"})=>(0,a.jsx)("div",{className:(0,y.cn)("animate-spin rounded-full border-2",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"}[e],{primary:"border-[#0A8E81] border-t-transparent",white:"border-white border-t-transparent",gray:"border-gray-300 border-t-transparent"}[t],r)});let $=({totalAmount:e,onSuccess:r,onError:t,orderDetails:s})=>{let n=(0,N.useStripe)(),o=(0,N.useElements)(),[l,c]=(0,i.useState)(!1),{error:d,setStripeError:u,clearError:h,getErrorSuggestion:x,hasError:f}=A(),g=async e=>{if(e.preventDefault(),!n||!o){u({message:"Stripe has not loaded yet. Please wait.",type:"validation_error"});return}c(!0),h();try{let{error:e,paymentIntent:a}=await n.confirmPayment({elements:o,redirect:"if_required",confirmParams:{return_url:`${window.location.origin}/checkout/success`}});if(e)u(e),t(e.message||"Payment failed");else if(a&&"succeeded"===a.status)try{let e=await fetch("/api/confirm-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_intent_id:a.id,order_details:s})}),i=await e.json();i.success?r(a):(u({message:i.error||"Payment confirmation failed",type:"api_error"}),t(i.error||"Payment confirmation failed"))}catch(e){console.error("Error confirming payment:",e),u({message:"Payment succeeded but confirmation failed. Please contact support.",type:"api_error"}),t("Payment confirmation failed")}else a&&"processing"===a.status?u({message:"Your payment is being processed. You will receive a confirmation email shortly.",type:"validation_error"}):a&&"requires_action"===a.status&&u({message:"Your payment requires additional authentication. Please complete the verification.",type:"validation_error"})}catch(e){console.error("Payment error:",e),u(e),t(e.message||"Payment failed")}finally{c(!1)}};return(0,a.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[f&&d&&(0,a.jsx)(Y,{title:"Payment Error",message:d.message,suggestion:x(d),onDismiss:h,variant:"validation_error"===d.type?"warning":"destructive"}),(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsx)(N.PaymentElement,{options:{layout:"tabs",paymentMethodOrder:["card","apple_pay","google_pay"],fields:{billingDetails:{name:"auto",email:"auto",phone:"auto",address:{country:"auto",line1:"auto",line2:"auto",city:"auto",state:"auto",postalCode:"auto"}}}}})}),(0,a.jsx)(p.z,{type:"submit",disabled:!n||!o||l,className:"w-full bg-[#0A8E81] hover:bg-[#087267] text-white py-4 text-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",size:"lg",children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U,{size:"sm",color:"white"}),"Processing Payment..."]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),"Pay $",e.toFixed(2)," CAD"]})}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{children:"Your payment information is secure and encrypted"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Powered by Stripe â€¢ PCI DSS compliant"})]})]})};var F=({clientSecret:e,totalAmount:r,onSuccess:t,onError:s,orderDetails:i})=>{let n=I();return(0,a.jsx)(N.Elements,{options:{clientSecret:e,appearance:{theme:"stripe",variables:{colorPrimary:"#0A8E81",colorBackground:"#ffffff",colorText:"#1f2937",colorDanger:"#ef4444",borderRadius:"8px"}}},stripe:n,children:(0,a.jsx)($,{totalAmount:r,onSuccess:t,onError:s,orderDetails:i})})},K=t(8530),z=()=>{let{items:e,total:r,clearCart:t}=(0,b.j)(),s=(0,j.useRouter)(),[f,g]=(0,i.useState)(!1),[y,N]=(0,i.useState)(null),[_,E]=(0,i.useState)(null),[w,P]=(0,i.useState)("shipping"),[S,C]=(0,i.useState)({email:"",firstName:"",lastName:"",phone:"",address:"",apartment:"",city:"",province:"",postalCode:"",country:"Canada",saveInfo:!1,subscribe:!0}),T=r||0,I=(0,K.QP)(T),k=(0,K.km)(T),A=(0,K.tf)(T),R=(e,r)=>{C(t=>({...t,[e]:r}))};(0,i.useEffect)(()=>{"payment"===w&&!y&&A>0&&B()},[w,A,y]);let B=async()=>{try{g(!0);let r=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:A,currency:K.vc.stripe.currency,customer_email:S.email,items:e||[],metadata:{customer_email:S.email,customer_name:`${S.firstName} ${S.lastName}`,shipping_address:`${S.address}, ${S.city}, ${S.province} ${S.postalCode}`,phone:S.phone,items_summary:e?.map(e=>`${e?.name} (${e?.quantity})`).join(", ")||"",subtotal:T.toString(),shipping:I.toString(),tax:k.toString(),total:A.toString()}})}),t=await r.json();t.error?console.error("Error creating payment intent:",t.error):(N(t.client_secret),E(t.payment_intent_id))}catch(e){console.error("Error creating payment intent:",e)}finally{g(!1)}},q=async e=>{if(e.preventDefault(),!S.email||!S.firstName||!S.lastName||!S.address||!S.city||!S.province||!S.postalCode){alert("Please fill in all required fields");return}P("payment")};return e?.length===0?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(l.Z,{className:"h-12 w-12 text-gray-400"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Add some beautiful pieces to your cart before checkout."}),(0,a.jsx)(p.z,{onClick:()=>s.push("/products"),className:"bg-[#0A8E81] hover:bg-[#087267]",children:"Continue Shopping"})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:`flex items-center gap-2 ${"shipping"===w?"text-[#0A8E81]":"text-gray-400"}`,children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${"shipping"===w?"bg-[#0A8E81] text-white":"bg-gray-200"}`,children:"1"}),(0,a.jsx)("span",{className:"font-medium",children:"Shipping"})]}),(0,a.jsx)("div",{className:"w-12 h-px bg-gray-300"}),(0,a.jsxs)("div",{className:`flex items-center gap-2 ${"payment"===w?"text-[#0A8E81]":"text-gray-400"}`,children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${"payment"===w?"bg-[#0A8E81] text-white":"bg-gray-200"}`,children:"2"}),(0,a.jsx)("span",{className:"font-medium",children:"Payment"})]})]})}),"shipping"===w?(0,a.jsxs)("form",{onSubmit:q,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-[#0A8E81]"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Contact Information"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"email",children:"Email Address*"}),(0,a.jsx)(h.I,{id:"email",type:"email",value:S.email,onChange:e=>R("email",e.target.value),className:"mt-1",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"firstName",children:"First Name*"}),(0,a.jsx)(h.I,{id:"firstName",value:S.firstName,onChange:e=>R("firstName",e.target.value),className:"mt-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"lastName",children:"Last Name*"}),(0,a.jsx)(h.I,{id:"lastName",value:S.lastName,onChange:e=>R("lastName",e.target.value),className:"mt-1",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(h.I,{id:"phone",type:"tel",value:S.phone,onChange:e=>R("phone",e.target.value),className:"mt-1"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-[#0A8E81]"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Shipping Address"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"address",children:"Address*"}),(0,a.jsx)(h.I,{id:"address",value:S.address,onChange:e=>R("address",e.target.value),className:"mt-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"apartment",children:"Apartment, Suite, etc."}),(0,a.jsx)(h.I,{id:"apartment",value:S.apartment,onChange:e=>R("apartment",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"city",children:"City*"}),(0,a.jsx)(h.I,{id:"city",value:S.city,onChange:e=>R("city",e.target.value),className:"mt-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"province",children:"Province*"}),(0,a.jsxs)("select",{id:"province",value:S.province,onChange:e=>R("province",e.target.value),className:"mt-1 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Province"}),(0,a.jsx)("option",{value:"BC",children:"British Columbia"}),(0,a.jsx)("option",{value:"AB",children:"Alberta"}),(0,a.jsx)("option",{value:"ON",children:"Ontario"}),(0,a.jsx)("option",{value:"QC",children:"Quebec"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x._,{htmlFor:"postalCode",children:"Postal Code*"}),(0,a.jsx)(h.I,{id:"postalCode",value:S.postalCode,onChange:e=>R("postalCode",e.target.value),className:"mt-1",required:!0})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(v,{id:"saveInfo",checked:S.saveInfo,onCheckedChange:e=>R("saveInfo",e)}),(0,a.jsx)("label",{htmlFor:"saveInfo",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Save this information for next time"})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(v,{id:"subscribe",checked:S.subscribe,onCheckedChange:e=>R("subscribe",e)}),(0,a.jsx)("label",{htmlFor:"subscribe",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Email me with news and offers"})]})]}),(0,a.jsx)(p.z,{type:"submit",className:"w-full bg-[#0A8E81] hover:bg-[#087267] text-white py-4 text-lg font-medium",size:"lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"Continue to Payment"]})})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Complete Your Order"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Shipping to:"})," ",S.firstName," ",S.lastName]}),(0,a.jsxs)("p",{children:[S.address,", ",S.city,", ",S.province," ",S.postalCode]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",S.email]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-[#0A8E81]"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Information"}),(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600 ml-auto"})]}),y?(0,a.jsx)(F,{clientSecret:y,totalAmount:A,onSuccess:e=>{t(),s.push(`/checkout/success?payment_intent=${e.id}`)},onError:e=>{console.error("Payment error:",e)},orderDetails:{...S,items:e,subtotal:T,shipping:I,tax:k,total:A}}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-[#0A8E81] border-t-transparent mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Preparing secure checkout..."})]})]}),(0,a.jsx)(p.z,{onClick:()=>P("shipping"),variant:"outline",className:"w-full",size:"lg",children:"Back to Shipping Information"})]})]}),(0,a.jsx)(n.E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm sticky top-24 space-y-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Order Summary"}),(0,a.jsx)("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:e?.map((e,r)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"relative w-12 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx(o.default,{src:e?.image||"/images/placeholder-product.jpg",alt:e?.name||"Product",fill:!0,className:"object-cover",sizes:"48px"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate",children:e?.name}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e?.category})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium text-sm",children:["$",((e?.price||0)*(e?.quantity||1)).toFixed(2)]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Qty: ",e?.quantity||1]})]})]},`${e?.id}-${r}`))||[]}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["$",T.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Shipping"}),(0,a.jsx)("span",{children:0===I?"FREE":`$${I.toFixed(2)}`})]}),T<K.vc.business.freeShippingThreshold&&(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:["Add $",(K.vc.business.freeShippingThreshold-T).toFixed(2)," more for FREE shipping!"]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Tax (GST/PST)"}),(0,a.jsxs)("span",{children:["$",k.toFixed(2)]})]}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{className:"text-[#0A8E81]",children:["$",A.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{children:"SSL secured checkout"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{children:"Free shipping on orders $50+"})]})]})]})})]})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var s=t(7437),a=t(2265),i=t(7053),n=t(7712),o=t(4508);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...n},c)=>{let d=a?i.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(l({variant:r,size:t,className:e})),ref:c,...n})});c.displayName="Button"},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var s=t(7437),a=t(2265),i=t(4508);let n=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));n.displayName="Input"},6815:function(e,r,t){"use strict";t.d(r,{_:function(){return c}});var s=t(7437),a=t(2265),i=t(6394),n=t(7712),o=t(4508);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.f,{ref:t,className:(0,o.cn)(l(),e),...r}));c.displayName=i.f.displayName},8530:function(e,r,t){"use strict";t.d(r,{QP:function(){return n},km:function(){return i},tf:function(){return o},vc:function(){return a}});var s=t(257);let a={app:{name:s.env.NEXT_PUBLIC_APP_NAME||"FaeLight Crafts",url:s.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000",description:"Unique handcrafted jewelry and accessories",email:s.env.FROM_EMAIL||"hello@faelightcrafts.com",supportEmail:s.env.ADMIN_EMAIL||"support@faelightcrafts.com"},stripe:{publishableKey:"pk_test_51S3qr1HT8UTeXRMX8Bfp4pVx3jGVqJ0OLs7G5voYol7dxzoTHm4ICTUcImeZF2BjUAexdmdfnsP59RrvjQwSN7hG00TJRMiVSi",secretKey:s.env.STRIPE_SECRET_KEY,webhookSecret:s.env.STRIPE_WEBHOOK_SECRET,currency:"cad",country:"CA"},business:{freeShippingThreshold:50,taxRate:.12,shippingCost:9.99,minOrderAmount:.5,maxOrderAmount:1e4,orderNumberPrefix:"FC",supportedCurrencies:["CAD","USD"],supportedCountries:["CA","US"]},email:{templates:{orderConfirmation:"order-confirmation",paymentFailed:"payment-failed",shippingNotification:"shipping-notification",adminNotification:"admin-notification"}},social:{instagram:s.env.INSTAGRAM_URL,facebook:s.env.FACEBOOK_URL,twitter:s.env.TWITTER_URL},analytics:{googleAnalyticsId:s.env.GOOGLE_ANALYTICS_ID,facebookPixelId:s.env.FACEBOOK_PIXEL_ID},features:{enableNewsletter:!0,enableReviews:!0,enableWishlist:!0,enableGuestCheckout:!0,enableApplePay:!0,enableGooglePay:!0,enableInventoryTracking:!1}},i=e=>e*a.business.taxRate,n=e=>e>=a.business.freeShippingThreshold?0:a.business.shippingCost,o=e=>{let r=i(e),t=n(e);return e+r+t}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var s=t(1994),a=t(3335);function i(...e){return(0,a.m6)((0,s.W)(e))}}},function(e){e.O(0,[137,287,822,455,971,117,744],function(){return e(e.s=2932)}),_N_E=e.O()}]);